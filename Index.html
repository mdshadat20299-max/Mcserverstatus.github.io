<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Minecraft Server Status Checker</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#3b82f6;--muted:#94a3b8;color-scheme:dark}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,-apple-system,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071023 0%, #071428 100%);padding:28px;display:flex;align-items:flex-start;gap:20px;flex-direction:column}
    .container{max-width:980px;margin:0 auto;width:100%}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    h1{font-size:20px;margin:0 0 8px}
    .row{display:flex;gap:12px;align-items:center}
    input[type=text]{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#e6eef8}
    button{background:var(--accent);border:0;padding:10px 14px;border-radius:8px;color:white;cursor:pointer}
    .muted{color:var(--muted);font-size:13px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:12px}
    .stat{padding:12px;border-radius:10px;background:rgba(255,255,255,0.01);min-height:64px}
    .monos{font-family:ui-monospace,SFMono-Regular,Menlo,monospace}
    pre{white-space:pre-wrap;font-size:13px}
    .favicon{width:64px;height:64px;border-radius:8px;object-fit:cover;background:#071428;display:block}
    .players-list{max-height:220px;overflow:auto;padding:6px;border-radius:8px;background:rgba(0,0,0,0.25)}
    .small{font-size:13px}
    footer{margin-top:16px;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Minecraft Server Status Checker</h1>
      <div class="row" style="margin-top:10px">
        <input id="serverIp" type="text" placeholder="Enter server IP or IP:port (e.g. play.example.com or 1.2.3.4:25565)"/>
        <button id="checkBtn">Check</button>
      </div>
      <div class="muted small" style="margin-top:8px">Uses <strong>api.mcsrvstat.us</strong> to ping servers directly from the browser. Some servers hide player names or supported version ranges — see notes below.</div><div id="result" style="margin-top:14px;display:none">
    <div class="grid">
      <div class="stat" id="statusStat"><strong>Status</strong><div id="statusText" class="small monos"></div></div>
      <div class="stat"><strong>MOTD</strong><div id="motd" class="small"></div></div>
      <div class="stat"><strong>Version</strong><div id="version" class="small monos"></div></div>
      <div class="stat"><strong>Players</strong><div id="players" class="small monos"></div></div>
      <div class="stat" id="faviconCard"><strong>Server Icon</strong><div style="margin-top:8px"><img id="faviconImg" class="favicon" src="" alt="favicon"/></div></div>
      <div class="stat"><strong>Other info</strong><div id="otherInfo" class="small"></div></div>
    </div>

    <div style="margin-top:12px" class="card">
      <strong>Online players (if reported)</strong>
      <div id="playersList" class="players-list small" style="margin-top:8px">—</div>
    </div>

    <div style="margin-top:12px" class="card">
      <strong>Raw JSON (for power users)</strong>
      <pre id="rawJson" class="small"></pre>
    </div>

    <footer>
      Notes: 1) Exact server uptime is not exposed by the standard Minecraft ping protocol, so the tool cannot reliably show true uptime. 2) Supported version ranges (eg. 1.8.9–1.21.8) are only known if the server advertises them; most servers report a single protocol version string. 3) Player names are shown only if the server exposes them (some servers hide the list).
    </footer>
  </div>
</div>

  </div>  <script>
    const btn = document.getElementById('checkBtn')
    const ipInput = document.getElementById('serverIp')
    const result = document.getElementById('result')
    const statusText = document.getElementById('statusText')
    const motd = document.getElementById('motd')
    const version = document.getElementById('version')
    const players = document.getElementById('players')
    const playersList = document.getElementById('playersList')
    const faviconImg = document.getElementById('faviconImg')
    const faviconCard = document.getElementById('faviconCard')
    const otherInfo = document.getElementById('otherInfo')
    const rawJson = document.getElementById('rawJson')

    function clearDisplay(){
      statusText.textContent = ''
      motd.textContent = ''
      version.textContent = ''
      players.textContent = ''
      playersList.textContent = '—'
      faviconImg.src = ''
      faviconCard.style.display = 'block'
      otherInfo.textContent = ''
      rawJson.textContent = ''
    }

    function prettifyMotd(m){
      if(!m) return '—'
      // MOTD can be an array or object with 'clean' or 'raw'
      if(typeof m === 'string') return m
      if(Array.isArray(m)) return m.join('\n')
      if(m.clean) return m.clean.join('\n')
      if(m.raw) return m.raw
      return JSON.stringify(m)
    }

    async function checkServer(ip){
      clearDisplay()
      result.style.display = 'block'
      statusText.textContent = 'Checking...'

      // normalize
      ip = ip.trim()
      if(!ip){statusText.textContent = 'Enter a server IP';return}

      // API used: https://api.mcsrvstat.us/2/<ip>
      // This public API responds with JSON including: online,motd,players,version,favicon,protocol,hostname

      const endpoint = 'https://api.mcsrvstat.us/2/' + encodeURIComponent(ip)
      try{
        const res = await fetch(endpoint)
        if(!res.ok) throw new Error('Network response not OK: '+res.status)
        const data = await res.json()

        rawJson.textContent = JSON.stringify(data, null, 2)

        if(data && data.online){
          statusText.innerHTML = '<span style="color:#7ee787">Online</span>'
        } else {
          statusText.innerHTML = '<span style="color:#ff7b7b">Offline or not responding</span>'
        }

        motd.textContent = prettifyMotd(data.motd && (data.motd.clean || data.motd.raw || data.motd))

        // Version & protocol
        if(data.version) version.textContent = data.version + (data.protocol ? ' (protocol: '+data.protocol+')' : '')
        else version.textContent = '—'

        // Players
        if(data.players){
          const online = (data.players.online != null) ? data.players.online : '—'
          const max = (data.players.max != null) ? data.players.max : '—'
          players.textContent = `${online} / ${max}`

          if(Array.isArray(data.players.list) && data.players.list.length){
            playersList.innerHTML = ''
            data.players.list.forEach(p => {
              const el = document.createElement('div')
              el.textContent = p
              playersList.appendChild(el)
            })
          } else if(data.players.sample && Array.isArray(data.players.sample) && data.players.sample.length){
            // Some APIs use sample
            playersList.innerHTML = ''
            data.players.sample.forEach(p => playersList.appendChild(Object.assign(document.createElement('div'),{textContent: p.name || JSON.stringify(p)})))
          } else {
            playersList.textContent = 'Player list not exposed by this server.'
          }
        } else {
          players.textContent = '—'
          playersList.textContent = '—'
        }

        // favicon — many APIs return a data:image/png;base64,<data> string
        if(data.icon){
          faviconImg.src = data.icon
        } else if(data.favicon){
          // older/different key
          faviconImg.src = data.favicon
        } else {
          faviconImg.src = ''
          faviconCard.style.display = 'none'
        }

        // Other info
        const extras = []
        if(data.hostname) extras.push('Hostname: '+data.hostname)
        if(data.port) extras.push('Port: '+data.port)
        if(data.software) extras.push('Software: '+data.software)
        if(data.players && data.players.online === 0) extras.push('Note: server reports 0 players online')
        otherInfo.textContent = extras.join(' • ') || '—'

      }catch(err){
        statusText.innerHTML = '<span style="color:#ffb86b">Error</span>'
        rawJson.textContent = 'Fetch error: '+err.message
      }
    }

    btn.addEventListener('click', ()=> checkServer(ipInput.value))
    ipInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') checkServer(ipInput.value) })

    // helpful test buttons (uncomment to prefill)
    // ipInput.value = 'play.hypixel.net'
  </script></body>
</html>